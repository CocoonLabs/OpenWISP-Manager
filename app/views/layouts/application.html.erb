<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dli">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <title>
    <%=t :vWisps_manager %>
    <% if @wisp %>
        - <%=h @wisp.name %>
    <% end %>
  </title>
  <%= stylesheet_link_tag 'fluid960/reset' %>
  <%= stylesheet_link_tag 'fluid960/text' %>
  <%= stylesheet_link_tag 'fluid960/grid' %>
  <%= stylesheet_link_tag 'fluid960/layout' %>
  <%= stylesheet_link_tag 'fluid960/nav' %>

  <%= stylesheet_link_tag 'custom' %>

  <%= javascript_include_tag :defaults, 'fluid960'  %>


  <% if controller.class == AccessPointsController || controller.class == WispsController %>
      <% if @map %>
          <%= GMap.header :with_vml => false, :host => request.host %>
          <%= @map.to_html %>
      <% end %>
  <% end %>

</head>
<body>
<div class="container_16">
  <div class="grid_16">
    <h1 id="branding">
      <a href=""><%= image_tag("logo_caspur.png", :border => 0, :size => "58x45", :alt => 'Open WISP Manager', :class => "wispmanager_logo") %> Open WISP Manager</a>
    </h1>
  </div>
  <div class="clear">&nbsp;</div>

  <div class="grid_8" id="_flash_bar"style="color:green">
    <strong><%= flash[:notice] ? flash[:notice] : "&nbsp;" %></strong>
  </div>
  <div class="grid_8" style="text-align:right">
    <a>
      <% if current_operator %>
          <%= t(:Logged_in_as) %>: <%=h current_operator.login %>
      <% else %>
          <%= t(:Not_logged_in) %>
      <% end %>
    </a>
  </div>
  <div class="clear">&nbsp;</div>

  <div class="grid_16">
    <ul class="nav main">
      <% if auth?(:wisps_viewer) || auth?(:wisp_viewer, @wisp) %>
          <li><%= link_to t(:Wisps), wisps_path %></li>
      <% end %>
      <% if auth? :servers_viewer %>
          <li><%= link_to t(:OWISPManager_servers), servers_path %></li>
      <% end %>
      <!-- wisp administration menus -->
      <% if @wisp and @wisp.id %>
          <% if auth?(:wisps_viewer) || auth?(:access_point_templates_viewer, @wisp) %>
              <li>
                <%= link_to t(:Templates), '#', :class => 'nohand' %>
                <ul>
<%# TODO: to be restored when a usage for access point template groups will be found 

                  <li>
                    <%= link_to t(:Template_groups), wisp_template_groups_path(@wisp) % >
                  </li>
%>
                  <li><%= link_to t(:All), wisp_access_point_templates_path(@wisp) %></li>
                </ul>
              </li>
          <% end %>
          <% if auth?(:wisps_viewer) || auth?(:access_points_viewer, @wisp) %>
              <li>
                <%= link_to t(:AccessPoints), '#', :class => 'nohand' %>
                <ul>
                  <li><%= link_to t(:All), wisp_access_points_path(@wisp) %></li>
                  <li><%= link_to t(:Outdated), outdated_access_points_path(@wisp) %></li>
<%# TODO: to be restored when a usage for access point groups will be found
              <li>
                <%= link_to t(:Access_point_groups), wisp_access_point_groups_path(@wisp) % >
              </li>
%>
                </ul>
              </li>
          <% end %>

          <% if auth?(:wisps_viewer) || auth?(:wisp_viewer, @wisp) %>
              <li><%= link_to t(:Certification_authority), wisp_ca_path(@wisp) %></li>
          <% end %>
          <% if auth?(:wisps_viewer) || auth?(:operators_viewer, @wisp) %>
              <li><%= link_to t(:Operators), wisp_operators_path(@wisp) %></li>
          <% end %>
      <% end %>

      <!-- logout -->
      <% if current_operator %>
          <span class="right">
          <li>
            <%= link_to t(:Home), home_path_for(current_operator) %>
          </li>
          <li>
            <%= link_to t(:Logout), operator_session_path, :method => :delete %>
          </li>
          </span>
      <% end %>
    </ul>
  </div>
  <div class="clear">&nbsp;</div>

  <div class="grid_16">
    &nbsp;
  </div>
  <div class="clear">&nbsp;</div>

  <%= yield %>

  <div class="grid_16">
    &nbsp;
  </div>
  <div class="clear">&nbsp;</div>

  <div class="grid_16" id="site_info">
    <div class="box" style="text-align:center">
      <p>Open WISP Manager - Created by <a href="http://www.caspur.it/">CASPUR</a></p>
    </div>
  </div>
  <div class="clear"></div>

</div>

</body>
</html>
